{"version":3,"sources":["webpack:////Users/jerrio/Desktop/JumboX/TheShortFilmShow/short-film-show-client/TheShortFilmShow/pages/upload/upload.vue?735b","webpack:////Users/jerrio/Desktop/JumboX/TheShortFilmShow/short-film-show-client/TheShortFilmShow/pages/upload/upload.vue?c4be","webpack:////Users/jerrio/Desktop/JumboX/TheShortFilmShow/short-film-show-client/TheShortFilmShow/main.js","webpack:////Users/jerrio/Desktop/JumboX/TheShortFilmShow/short-film-show-client/TheShortFilmShow/pages/upload/upload.vue","webpack:////Users/jerrio/Desktop/JumboX/TheShortFilmShow/short-film-show-client/TheShortFilmShow/pages/upload/upload.vue?f3b2","webpack:////Users/jerrio/Desktop/JumboX/TheShortFilmShow/short-film-show-client/TheShortFilmShow/pages/upload/upload.vue?bf08","webpack:////Users/jerrio/Desktop/JumboX/TheShortFilmShow/short-film-show-client/TheShortFilmShow/pages/upload/upload.vue?0b64","webpack:///../../../../../../Users/jerrio/Desktop/JumboX/TheShortFilmShow/short-film-show-client/TheShortFilmShow/pages/upload/upload.vue","webpack:////Users/jerrio/Desktop/JumboX/TheShortFilmShow/short-film-show-client/TheShortFilmShow/static/weCropper.js"],"names":["Page","App","global","factory","module","exports","device","TOUCH_STATE","firstLetterUpper","str","charAt","toUpperCase","slice","setTouchState","instance","_len","arguments","length","arg","Array","_key","forEach","key","i","undefined","validator","o","Object","defineProperties","getDevice","wx","getSystemInfoSync","_typeof","Symbol","iterator","obj","constructor","prototype","classCallCheck","Constructor","TypeError","createClass","target","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_i","_s","next","done","push","value","err","isArray","tmp","DEFAULT","id","default","get","get$$1","set","set$$1","width","height","scale","zoom","src","cut","onReady","ready","onBeforeImageLoad","beforeImageLoad","onImageLoad","imageLoad","onBeforeDraw","beforeDraw","prepare","self","_getDevice","windowWidth","attachPage","pages","getCurrentPages","pageContext","wecropper","createCtx","ctx","createCanvasContext","deviceRadio","toFixed","observer","EVENT_TYPE","on","event","fn","indexOf","methods","console","log","JSON","stringify","boundWidth","boundHeight","_self$cut","_self$cut$x","x","_self$cut$y","y","_self$cut$width","_self$cut$height","updateCanvas","croperTarget","drawImage","imgLeft","imgTop","scaleWidth","scaleHeight","setBoundStyle","draw","pushOrign","uni","getImageInfo","success","res","innerAspectRadio","path","rectX","baseWidth","baseHeight","rectY","Math","abs","update","getCropperImage","args","ARG_TYPE","toString","call","_args$0$quality","quality","canvasToTempFilePath","canvasId","destWidth","destHeight","tempFilePath","fileType","__oneTouchStart","touch","touchX0","touchY0","__oneTouchMove","xMove","yMove","touchended","outsideBound","__twoTouchStart","touch0","touch1","oldDistance","touchX1","touchY1","sqrt","__twoTouchMove","newDistance","newScale","oldScale","__xtouchEnd","handle","touchStart","e","_e$touches","touches","clientX","clientY","touchMove","_e$touches2","touchEnd","_ref","_ref$color","color","_ref$mask","mask","_ref$lineWidth","lineWidth","beginPath","setFillStyle","fillRect","fill","setStrokeStyle","setLineWidth","moveTo","lineTo","stroke","__version__","weCropper","params","_default","keys","assign","cutt","init","version"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAA4oC,CAAgB,ohCAAG,EAAC,C;;;;;;;;;;;ACAhqC,uC;;;;;;;;;;;;ACAA;AACA;AACI,+F;AACAA,IAAI,CAAC,+BAAYC,eAAZ,CAAD,CAAJ,C;;;;;;;;;;;;ACHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqF;AAC3B;AACL;AACa;;;AAGlE;AACgL;AAChL,gBAAgB,4KAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,qBAAqB,yBAAyB;AAC9C;AACA;AACA,OAAO,+CAA+C,kBAAkB,EAAE;AAC1E;AACA;AACA;AACA,kBAAkB,6DAA6D;AAC/E;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,gBAAgB,iCAAiC;AACjD;AACA;AACA;AACA;AACA,kBAAkB,wBAAwB;AAC1C,eAAe;AACf,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wBAAwB;AAC1C,eAAe;AACf,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAAy/B,CAAgB,85BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;ACc7gC,+F;AACA;AACA;AACA;AACA,oB;AACA;AACA,MADA,kBACA;AACA;AACA;AACA,qBADA;AAEA,oBAFA;AAGA,sBAHA;AAIA,kBAJA;AAKA,eALA;AAMA;AACA,8BADA;AAEA,+BAFA;AAGA,oBAHA;AAIA,qBAJA,EANA,EADA;;;AAcA,mBAdA;;AAgBA,GAlBA;AAmBA;AACA,QADA,kBACA;AACA;AACA,uCADA;;AAGA,KALA;AAMA,cANA,sBAMA,CANA,EAMA;AACA;AACA,KARA;AASA,aATA,qBASA,CATA,EASA;AACA;AACA,KAXA;AAYA,YAZA,oBAYA,CAZA,EAYA;AACA;AACA,KAdA;AAeA,0BAfA,kCAeA,OAfA,EAeA,IAfA,EAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA;AACA,4BADA,EAFA;;AAKA,KA1BA;AA2BA,iBA3BA,yBA2BA,IA3BA,EA2BA;AACA;AACA,4BAFA,CAEA;AACA;AACA,qCADA,CACA;AACA;AACA,OAHA;AAIA,KAlCA;AAmCA,mBAnCA,6BAmCA;AACA;AACA;AACA;AACA,+BADA;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2EADA;AAEA,yCAFA;AAGA,wBAHA;AAIA;AACA,gDADA;AAEA,mCAFA;AAGA,6CAHA,EAJA;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCADA;AAEA,iCAFA;;AAIA;AACA;AACA,eAPA,MAOA;AACA;AACA,iCADA;;AAGA;AACA,aA5BA;;;AA+BA;AACA,qCADA;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAvEA,MAuEA;AACA;AACA;AACA,OA3EA;AA4EA,KA1HA;AA2HA,aA3HA,uBA2HA;AACA;;AAEA;AACA,gBADA,EACA;AACA,gCAFA,EAEA;AACA,uCAHA,EAGA;AACA,eAJA,mBAIA,GAJA,EAIA;AACA;AACA;;AAEA;AACA,SATA;;AAWA,KAzIA,EAnBA;;AA8JA,QA9JA,kBA8JA,MA9JA,EA8JA;AACA;AACA;AACA;AACA;AACA;AACA,gBADA;;;AAIA;AACA,QADA,CACA,OADA,EACA,iBADA;AAEA,QAFA,CAEA,iBAFA,EAEA;AACA;AACA,sBADA;AAEA,yBAFA;AAGA,wBAHA;;AAKA,OARA;AASA,QATA,CASA,WATA,EASA;AACA;AACA,OAXA;AAYA;AACA;AACA,GArLA,E;;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","file":"pages/upload/upload.js","sourcesContent":["import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin","import 'uni-pages';\nimport pageFactory from 'mpvue-page-factory'\n    import App from './pages/upload/upload.vue'\n    Page(pageFactory(App))","import { render, staticRenderFns } from \"./upload.vue?vue&type=template&id=db79f238&\"\nimport script from \"./upload.vue?vue&type=script&lang=js&\"\nexport * from \"./upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./upload.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('db79f238', component.options)\n    } else {\n      api.reload('db79f238', component.options)\n    }\n    module.hot.accept(\"./upload.vue?vue&type=template&id=db79f238&\", function () {\n      api.rerender('db79f238', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/jerrio/Desktop/JumboX/TheShortFilmShow/short-film-show-client/TheShortFilmShow/pages/upload/upload.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=template&id=db79f238&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", { staticClass: \"content\" }, [\n    _c(\n      \"view\",\n      { staticClass: \"cropper-wrapper\", staticStyle: { height: \"617px\" } },\n      [\n        _c(\"canvas\", {\n          staticClass: \"cropper\",\n          style: { width: _vm.cropperOpt.width, height: _vm.cropperOpt.height },\n          attrs: {\n            \"disable-scroll\": \"true\",\n            \"canvas-id\": \"cropper\",\n            eventid: \"5f0ac9fd-0\"\n          },\n          on: {\n            touchstart: _vm.touchStart,\n            touchmove: _vm.touchMove,\n            touchend: _vm.touchEnd\n          }\n        })\n      ]\n    ),\n    _c(\"view\", { staticClass: \"cropper-buttons\" }, [\n      _c(\n        \"view\",\n        {\n          staticClass: \"upload\",\n          attrs: { eventid: \"5f0ac9fd-1\" },\n          on: { tap: _vm.uploadTap }\n        },\n        [_vm._v(\"Browse Album\")]\n      ),\n      _c(\n        \"view\",\n        {\n          staticClass: \"getCropperImage\",\n          attrs: { eventid: \"5f0ac9fd-2\" },\n          on: { tap: _vm.getCropperImage }\n        },\n        [_vm._v(\"Confirm\")]\n      )\n    ])\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upload.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"cropper-wrapper\" style=\"height:617px\">\r\n\t\t\t<canvas class=\"cropper\" disable-scroll=\"true\" @touchstart=\"touchStart\" @touchmove=\"touchMove\" @touchend=\"touchEnd\"\r\n\t\t\t :style=\"{ width: cropperOpt.width, height: cropperOpt.height }\" canvas-id=\"cropper\"></canvas>\r\n\t\t</view>\r\n\t\t<view class=\"cropper-buttons\">\r\n\t\t\t<view class=\"upload\" @tap=\"uploadTap\">Browse Album</view>\r\n\t\t\t<view class=\"getCropperImage\" @tap=\"getCropperImage\">Confirm</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport weCropper from '../../static/weCropper';\r\n\tconst device = uni.getSystemInfoSync();\r\n\tconst width = device.windowWidth;\r\n\tconst height = device.windowHeight - 50;\r\n\tconsole.log(device);\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcropperOpt: {\r\n\t\t\t\t\tid: 'cropper',\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\tscale: 2.5,\r\n\t\t\t\t\tzoom: 8,\r\n\t\t\t\t\tcut: {\r\n\t\t\t\t\t\tx: (width - 295) / 2,\r\n\t\t\t\t\t\ty: (height - 413) / 2,\r\n\t\t\t\t\t\twidth: 295,\r\n\t\t\t\t\t\theight: 413\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tweCropper: ''\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tback() {\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl: '../infoDetail/infoDetail'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\ttouchStart(e) {\r\n\t\t\t\tthis.weCropper.touchStart(e);\r\n\t\t\t},\r\n\t\t\ttouchMove(e) {\r\n\t\t\t\tthis.weCropper.touchMove(e);\r\n\t\t\t},\r\n\t\t\ttouchEnd(e) {\r\n\t\t\t\tthis.weCropper.touchEnd(e);\r\n\t\t\t},\r\n\t\t\tconvertBase64UrlToBlob(dataURI, type) {\r\n\t\t\t\tvar binary = atob(dataURI.split(',')[1]);\r\n\t\t\t\tvar array = [];\r\n\t\t\t\tfor (var i = 0; i < binary.length; i++) {\r\n\t\t\t\t\tarray.push(binary.charCodeAt(i));\r\n\t\t\t\t}\r\n\t\t\t\treturn new Blob([new Uint8Array(array)], {\r\n\t\t\t\t\ttype: type\r\n\t\t\t\t}, {\r\n\t\t\t\t\tfilename: '1111.jpg'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tblobToDataURL(blob) {\r\n\t\t\t\tvar a = new FileReader();\r\n\t\t\t\ta.readAsDataURL(blob); //读取文件保存在result中\r\n\t\t\t\ta.onload = function(e) {\r\n\t\t\t\t\tvar getRes = e.target.result; //读取的结果在result中\r\n\t\t\t\t\tconsole.log(getRes);\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tgetCropperImage() {\r\n\t\t\t\tvar userInfo = this.getGlobalUserInfo();\r\n\t\t\t\tif (userInfo == null || userInfo == undefined || userInfo == \"\") {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../login/login',\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\n\t\t\t\t\r\n\t\t\t\tvar that = this;\r\n\t\t\t\t// var pathurl = that.$serverUrl + '/user/uploadFace?userId='; //上传服务器地址\r\n\t\t\t\tthis.weCropper.getCropperImage(avatar => {\r\n\t\t\t\t\tif (avatar) {\r\n\t\t\t\t\t\t//  获取到裁剪后的图片\r\n\t\t\t\t\t\t//  获取到裁剪后的图片\r\n\t\t\t\t\t\t// uni.redirectTo({\r\n\t\t\t\t\t\t// \turl: '../profile/profile?avatar=' + avatar\r\n\t\t\t\t\t\t// })\r\n\r\n\t\t\t\t\t\t//下面是上传到服务器的方法\r\n\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\turl: that.$serverUrl + '/user/uploadFace?userId=' + userInfo.id,\r\n\t\t\t\t\t\t\tfilePath: that.cropperOpt.src,\r\n\t\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t'content-type': 'application/json',\r\n\t\t\t\t\t\t\t\t'userId': userInfo.id,\r\n\t\t\t\t\t\t\t\t'userToken': userInfo.userToken,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\t// console.log(\"id=\" + userInfo.id);\r\n\t\t\t\t\t\t\t\t// console.log(\"Token=\" + userInfo.userToken);\r\n\t\t\t\t\t\t\t\tvar data = JSON.parse(res.data);\r\n\t\t\t\t\t\t\t\t// console.log(data.data);\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tif (data.status == 200) {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: 'Success!',\r\n\t\t\t\t\t\t\t\t\t\ticon: \"success\"\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\tvar imageUrl = data.data;\r\n\t\t\t\t\t\t\t\t\tthat.faceUrl = that.$serverUrl + imageUrl;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: data.msg\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\turl: '../profile/profile'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// uni.uploadFile({\r\n\t\t\t\t\t\t// \turl: pathurl,\r\n\t\t\t\t\t\t// \tfilePath: avatar,\r\n\t\t\t\t\t\t// \tname: 'file',\r\n\t\t\t\t\t\t// \tformData: {\r\n\t\t\t\t\t\t// \t\ttoken: token,\r\n\t\t\t\t\t\t// \t\tuserId: userId\r\n\t\t\t\t\t\t// \t},\r\n\t\t\t\t\t\t// \tsuccess: res => {\r\n\t\t\t\t\t\t// \t\tconsole.log('uploadImage success, res is:', res);\r\n\t\t\t\t\t\t// \t\tuni.showToast({\r\n\t\t\t\t\t\t// \t\t\ttitle: '上传成功',\r\n\t\t\t\t\t\t// \t\t\ticon: 'success',\r\n\t\t\t\t\t\t// \t\t\tduration: 1000\r\n\t\t\t\t\t\t// \t\t});\r\n\t\t\t\t\t\t// \t},\r\n\t\t\t\t\t\t// \tfail: err => {\r\n\t\t\t\t\t\t// \t\tconsole.log('uploadImage fail', err);\r\n\t\t\t\t\t\t// \t\tuni.showModal({\r\n\t\t\t\t\t\t// \t\t\tcontent: err.errMsg,\r\n\t\t\t\t\t\t// \t\t\tshowCancel: false\r\n\t\t\t\t\t\t// \t\t});\r\n\t\t\t\t\t\t// \t\tuni.hideLoading();\r\n\t\t\t\t\t\t// \t},\r\n\t\t\t\t\t\t// \tcomplete: () => {\r\n\t\t\t\t\t\t// \t\tconsole.log('complate');\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log('获取图片失败，请稍后重试');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tuploadTap() {\r\n\t\t\t\tconst that = this;\r\n\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1, // 默认9\r\n\t\t\t\t\tsizeType: ['compressed'], // 可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tlet src = res.tempFilePaths[0];\r\n\t\t\t\t\t\t//  获取裁剪图片资源后，给data添加src属性及其值\r\n\r\n\t\t\t\t\t\tthat.weCropper.pushOrign(src);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\t// do something\r\n\t\t\tconst cropperOpt = this.cropperOpt;\r\n\t\t\tconst src = option.src;\r\n\t\t\tif (src) {\r\n\t\t\t\tObject.assign(cropperOpt, {\r\n\t\t\t\t\tsrc\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.weCropper = new weCropper(cropperOpt)\r\n\t\t\t\t\t.on('ready', function(ctx) {})\r\n\t\t\t\t\t.on('beforeImageLoad', ctx => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '上传中',\r\n\t\t\t\t\t\t\ticon: 'loading',\r\n\t\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on('imageLoad', ctx => {\r\n\t\t\t\t\t\tuni.hideToast();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconsole.log(this.cropperOpt.src);\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.content {\r\n\t\tbackground: rgba(255, 255, 255, 1);\r\n\t}\r\n\r\n\t.head-list {\r\n\t\theight: 43px;\r\n\t\twidth: 100%;\r\n\t\tbackground: #ffffff;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tdisplay: flex;\r\n\t\tborder-bottom: 1px solid rgba(244, 244, 244, 1);\r\n\t}\r\n\r\n\t.head-info {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 18px;\r\n\t\tcolor: #000000;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.save-box {\r\n\t\tposition: absolute;\r\n\t\tright: 0px;\r\n\t\twidth: 50px;\r\n\t\theight: 43px;\r\n\t\tline-height: 43px;\r\n\t}\r\n\r\n\t.save {\r\n\t\tcolor: rgba(98, 111, 252, 1);\r\n\t\tfont-size: 16px;\r\n\t\tfont-weight: 400;\r\n\t}\r\n\r\n\t.icon-back {\r\n\t\tmargin-top: 11px;\r\n\t\twidth: 10px;\r\n\t\theight: 18px;\r\n\t\tcolor: #000000;\r\n\t\tmargin-left: 6px;\r\n\t}\r\n\r\n\t.icon-back-box {\r\n\t\tdisplay: block;\r\n\t\tposition: absolute;\r\n\t\tleft: 6px;\r\n\t\theight: 43px;\r\n\t\twidth: 30px;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.cropper {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.cropper-buttons {\r\n\t\tbackground-color: rgba(0, 0, 0, 0.95);\r\n\t\tcolor: #04b00f;\r\n\t}\r\n\r\n\t.cropper-wrapper {\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #F0F0F0;\r\n\t}\r\n\r\n\t.cropper-buttons {\r\n\t\twidth: 100vw;\r\n\t\theight: 50px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tline-height: 50px;\r\n\t}\r\n\r\n\t.cropper-buttons .upload,\r\n\t.cropper-buttons .getCropperImage {\r\n\t\twidth: 50%;\r\n\t\ttext-align: center;\r\n\t}\r\n</style>\n","(function(global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\t\ttypeof define === 'function' && define.amd ? define(factory) :\n\t\t(global.weCropper = factory());\n}(this, (function() {\n\t'use strict';\n\n\t/**\n\t * Created by sail on 2017/6/11.\n\t */\n\tvar device = void 0;\n\tvar TOUCH_STATE = ['touchstarted', 'touchmoved', 'touchended'];\n\n\tfunction firstLetterUpper(str) {\n\t\treturn str.charAt(0).toUpperCase() + str.slice(1);\n\t}\n\n\tfunction setTouchState(instance) {\n\t\tfor (var _len = arguments.length, arg = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\t\targ[_key - 1] = arguments[_key];\n\t\t}\n\n\t\tTOUCH_STATE.forEach(function(key, i) {\n\t\t\tif (arg[i] !== undefined) {\n\t\t\t\tinstance[key] = arg[i];\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction validator(instance, o) {\n\t\tObject.defineProperties(instance, o);\n\t}\n\n\tfunction getDevice() {\n\t\tif (!device) {\n\t\t\tdevice = wx.getSystemInfoSync();\n\t\t}\n\t\treturn device;\n\t}\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function(obj) {\n\t\treturn typeof obj;\n\t} : function(obj) {\n\t\treturn obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" :\n\t\t\ttypeof obj;\n\t};\n\n\n\n\n\tvar classCallCheck = function(instance, Constructor) {\n\t\tif (!(instance instanceof Constructor)) {\n\t\t\tthrow new TypeError(\"Cannot call a class as a function\");\n\t\t}\n\t};\n\n\tvar createClass = function() {\n\t\tfunction defineProperties(target, props) {\n\t\t\tfor (var i = 0; i < props.length; i++) {\n\t\t\t\tvar descriptor = props[i];\n\t\t\t\tdescriptor.enumerable = descriptor.enumerable || false;\n\t\t\t\tdescriptor.configurable = true;\n\t\t\t\tif (\"value\" in descriptor) descriptor.writable = true;\n\t\t\t\tObject.defineProperty(target, descriptor.key, descriptor);\n\t\t\t}\n\t\t}\n\n\t\treturn function(Constructor, protoProps, staticProps) {\n\t\t\tif (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t\t\tif (staticProps) defineProperties(Constructor, staticProps);\n\t\t\treturn Constructor;\n\t\t};\n\t}();\n\n\n\n\n\tvar slicedToArray = function() {\n\t\tfunction sliceIterator(arr, i) {\n\t\t\tvar _arr = [];\n\t\t\tvar _n = true;\n\t\t\tvar _d = false;\n\t\t\tvar _e = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n\t\t\t\t\t_arr.push(_s.value);\n\n\t\t\t\t\tif (i && _arr.length === i) break;\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_d = true;\n\t\t\t\t_e = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_n && _i[\"return\"]) _i[\"return\"]();\n\t\t\t\t} finally {\n\t\t\t\t\tif (_d) throw _e;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn _arr;\n\t\t}\n\n\t\treturn function(arr, i) {\n\t\t\tif (Array.isArray(arr)) {\n\t\t\t\treturn arr;\n\t\t\t} else if (Symbol.iterator in Object(arr)) {\n\t\t\t\treturn sliceIterator(arr, i);\n\t\t\t} else {\n\t\t\t\tthrow new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n\t\t\t}\n\t\t};\n\t}();\n\n\tvar tmp = {};\n\n\tvar DEFAULT = {\n\t\tid: {\n\t\t\tdefault: 'cropper',\n\t\t\tget: function get$$1() {\n\t\t\t\treturn tmp.id;\n\t\t\t},\n\t\t\tset: function set$$1(value) {\n\t\t\t\tif (typeof value !== 'string') {}\n\t\t\t\ttmp.id = value;\n\t\t\t}\n\t\t},\n\t\twidth: {\n\t\t\tdefault: 750,\n\t\t\tget: function get$$1() {\n\t\t\t\treturn tmp.width;\n\t\t\t},\n\t\t\tset: function set$$1(value) {\n\t\t\t\ttmp.width = value;\n\t\t\t}\n\t\t},\n\t\theight: {\n\t\t\tdefault: 750,\n\t\t\tget: function get$$1() {\n\t\t\t\treturn tmp.height;\n\t\t\t},\n\t\t\tset: function set$$1(value) {\n\t\t\t\ttmp.height = value;\n\t\t\t}\n\t\t},\n\t\tscale: {\n\t\t\tdefault: 2.5,\n\t\t\tget: function get$$1() {\n\t\t\t\treturn tmp.scale;\n\t\t\t},\n\t\t\tset: function set$$1(value) {\n\t\t\t\ttmp.scale = value;\n\t\t\t}\n\t\t},\n\t\tzoom: {\n\t\t\tdefault: 5,\n\t\t\tget: function get$$1() {\n\t\t\t\treturn tmp.zoom;\n\t\t\t},\n\t\t\tset: function set$$1(value) {\n\t\t\t\ttmp.zoom = value;\n\t\t\t}\n\t\t},\n\t\tsrc: {\n\t\t\tdefault: 'cropper',\n\t\t\tget: function get$$1() {\n\t\t\t\treturn tmp.src;\n\t\t\t},\n\t\t\tset: function set$$1(value) {\n\t\t\t\ttmp.src = value;\n\t\t\t}\n\t\t},\n\t\tcut: {\n\t\t\tdefault: {},\n\t\t\tget: function get$$1() {\n\t\t\t\treturn tmp.cut;\n\t\t\t},\n\t\t\tset: function set$$1(value) {\n\t\t\t\ttmp.cut = value;\n\t\t\t}\n\t\t},\n\t\tonReady: {\n\t\t\tdefault: null,\n\t\t\tget: function get$$1() {\n\t\t\t\treturn tmp.ready;\n\t\t\t},\n\t\t\tset: function set$$1(value) {\n\t\t\t\ttmp.ready = value;\n\t\t\t}\n\t\t},\n\t\tonBeforeImageLoad: {\n\t\t\tdefault: null,\n\t\t\tget: function get$$1() {\n\t\t\t\treturn tmp.beforeImageLoad;\n\t\t\t},\n\t\t\tset: function set$$1(value) {\n\t\t\t\ttmp.beforeImageLoad = value;\n\t\t\t}\n\t\t},\n\t\tonImageLoad: {\n\t\t\tdefault: null,\n\t\t\tget: function get$$1() {\n\t\t\t\treturn tmp.imageLoad;\n\t\t\t},\n\t\t\tset: function set$$1(value) {\n\t\t\t\ttmp.imageLoad = value;\n\t\t\t}\n\t\t},\n\t\tonBeforeDraw: {\n\t\t\tdefault: null,\n\t\t\tget: function get$$1() {\n\t\t\t\treturn tmp.beforeDraw;\n\t\t\t},\n\t\t\tset: function set$$1(value) {\n\t\t\t\ttmp.beforeDraw = value;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Created by sail on 2017/6/11.\n\t */\n\tfunction prepare() {\n\t\tvar self = this;\n\n\t\tvar _getDevice = getDevice(),\n\t\t\twindowWidth = _getDevice.windowWidth;\n\n\t\tself.attachPage = function() {\n\t\t\tvar pages = getCurrentPages\n\t\t\t//  获取到当前page上下文\n\t\t\t();\n\t\t\tvar pageContext = pages[pages.length - 1];\n\t\t\t//  把this依附在Page上下文的wecropper属性上，便于在page钩子函数中访问\n\t\t\tpageContext.wecropper = self;\n\t\t};\n\n\t\tself.createCtx = function() {\n\t\t\tvar id = self.id;\n\n\t\t\tif (id) {\n\t\t\t\tself.ctx = wx.createCanvasContext(id);\n\t\t\t}\n\t\t};\n\n\t\tself.deviceRadio = windowWidth / 750;\n\t\tself.deviceRadio = self.deviceRadio.toFixed(2)\n\t}\n\n\t/**\n\t *\n\t */\n\tfunction observer() {\n\t\tvar self = this;\n\n\t\tvar EVENT_TYPE = ['ready', 'beforeImageLoad', 'beforeDraw', 'imageLoad'];\n\n\t\tself.on = function(event, fn) {\n\t\t\tif (EVENT_TYPE.indexOf(event) > -1) {\n\t\t\t\tif (typeof fn === 'function') {\n\t\t\t\t\tevent === 'ready' ? fn(self) : self['on' + firstLetterUpper(event)] = fn;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn self;\n\t\t};\n\t}\n\n\t/**\n\t * Created by sail on 2017/6/11.\n\t */\n\tfunction methods() {\n\t\tvar self = this;\n\n\t\tvar deviceRadio = self.deviceRadio;\n\t\tconsole.log(JSON.stringify(self));\n\n\t\tvar boundWidth = self.width; // 裁剪框默认宽度，即整个画布宽度\n\t\tvar boundHeight = self.height; // 裁剪框默认高度，即整个画布高度\n\t\tvar _self$cut = self.cut,\n\t\t\t_self$cut$x = _self$cut.x,\n\t\t\tx = _self$cut$x === undefined ? 0 : _self$cut$x,\n\t\t\t_self$cut$y = _self$cut.y,\n\t\t\ty = _self$cut$y === undefined ? 0 : _self$cut$y,\n\t\t\t_self$cut$width = _self$cut.width,\n\t\t\twidth = _self$cut$width === undefined ? boundWidth : _self$cut$width,\n\t\t\t_self$cut$height = _self$cut.height,\n\t\t\theight = _self$cut$height === undefined ? boundHeight : _self$cut$height;\n\n\n\t\tself.updateCanvas = function() {\n\t\t\tif (self.croperTarget) {\n\n\t\t\t\t//  画布绘制图片\n\t\t\t\tself.ctx.drawImage(self.croperTarget, self.imgLeft, self.imgTop, self.scaleWidth, self.scaleHeight);\n\t\t\t}\n\t\t\ttypeof self.onBeforeDraw === 'function' && self.onBeforeDraw(self.ctx, self);\n\n\t\t\tself.setBoundStyle //\t设置边界样式\n\t\t\t();\n\t\t\tself.ctx.draw();\n\t\t\treturn self;\n\t\t};\n\n\t\tself.pushOrign = function(src) {\n\t\t\tself.src = src;\n\n\t\t\ttypeof self.onBeforeImageLoad === 'function' && self.onBeforeImageLoad(self.ctx, self);\n\n\t\t\tuni.getImageInfo({\n\t\t\t\tsrc: src,\n\t\t\t\tsuccess: function success(res) {\n\t\t\t\t\tvar innerAspectRadio = res.width / res.height;\n\t\t\t\t\tself.croperTarget = res.path || src;\n\t\t\t\t\tif (innerAspectRadio < width / height) {\n\t\t\t\t\t\tself.rectX = x;\n\t\t\t\t\t\tself.baseWidth = width;\n\t\t\t\t\t\tself.baseHeight = width / innerAspectRadio;\n\t\t\t\t\t\tself.rectY = y - Math.abs((height - self.baseHeight) / 2);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.rectY = y;\n\t\t\t\t\t\tself.baseWidth = height * innerAspectRadio;\n\t\t\t\t\t\tself.baseHeight = height;\n\t\t\t\t\t\tself.rectX = x - Math.abs((width - self.baseWidth) / 2);\n\t\t\t\t\t}\n\n\t\t\t\t\tself.imgLeft = self.rectX;\n\t\t\t\t\tself.imgTop = self.rectY;\n\t\t\t\t\tself.scaleWidth = self.baseWidth;\n\t\t\t\t\tself.scaleHeight = self.baseHeight;\n\n\t\t\t\t\tself.updateCanvas();\n\n\t\t\t\t\ttypeof self.onImageLoad === 'function' && self.onImageLoad(self.ctx, self);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tself.update();\n\t\t\treturn self;\n\t\t};\n\n\t\tself.getCropperImage = function() {\n\t\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\t\targs[_key] = arguments[_key];\n\t\t\t}\n\n\t\t\tvar id = self.id;\n\n\t\t\tvar ARG_TYPE = toString.call(args[0]);\n\t\t\tswitch (ARG_TYPE) {\n\t\t\t\tcase '[object Object]':\n\t\t\t\t\tvar _args$0$quality = args[0].quality,\n\t\t\t\t\t\tquality = _args$0$quality === undefined ? 10 : _args$0$quality;\n\t\t\t\t\tconsole.log(\"quality--\" + quality);\n\n\t\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\t\tcanvasId: id,\n\t\t\t\t\t\tx: x,\n\t\t\t\t\t\ty: y,\n\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\theight: height,\n\t\t\t\t\t\tdestWidth: width * quality / (deviceRadio * 10),\n\t\t\t\t\t\tdestHeight: height * quality / (deviceRadio * 10),\n\t\t\t\t\t\tsuccess: function success(res) {\n\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\ttypeof args[args.length - 1] === 'function' && args[args.length - 1](res.tempFilePath);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase '[object Function]':\n\t\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\t\tcanvasId: id,\n\t\t\t\t\t\tx: x,\n\t\t\t\t\t\ty: y,\n\t\t\t\t\t\tfileType: \"jpg\",\n\t\t\t\t\t\twidth: width,\n\t\t\t\t\t\theight: height,\n\t\t\t\t\t\tdestWidth: width,\n\t\t\t\t\t\tdestHeight: height,\n\t\t\t\t\t\tsuccess: function success(res) {\n\n\t\t\t\t\t\t\ttypeof args[args.length - 1] === 'function' && args[args.length - 1](res.tempFilePath);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn self;\n\t\t};\n\t}\n\n\t/**\n\t * Created by sail on 2017/6/11.\n\t */\n\tfunction update() {\n\t\tvar self = this;\n\t\tif (!self.src) return;\n\n\t\tself.__oneTouchStart = function(touch) {\n\t\t\tself.touchX0 = touch.x;\n\t\t\tself.touchY0 = touch.y;\n\t\t};\n\n\t\tself.__oneTouchMove = function(touch) {\n\t\t\tvar xMove = void 0,\n\t\t\t\tyMove = void 0;\n\t\t\t//计算单指移动的距离\n\t\t\tif (self.touchended) {\n\t\t\t\treturn self.updateCanvas();\n\t\t\t}\n\t\t\txMove = touch.x - self.touchX0;\n\t\t\tyMove = touch.y - self.touchY0;\n\n\t\t\tvar imgLeft = self.rectX + xMove;\n\t\t\tvar imgTop = self.rectY + yMove;\n\n\t\t\tself.outsideBound(imgLeft, imgTop);\n\n\t\t\tself.updateCanvas();\n\t\t};\n\n\t\tself.__twoTouchStart = function(touch0, touch1) {\n\t\t\tvar xMove = void 0,\n\t\t\t\tyMove = void 0,\n\t\t\t\toldDistance = void 0;\n\n\t\t\tself.touchX1 = self.rectX + self.scaleWidth / 2;\n\t\t\tself.touchY1 = self.rectY + self.scaleHeight / 2;\n\n\t\t\t//计算两指距离\n\t\t\txMove = touch1.x - touch0.x;\n\t\t\tyMove = touch1.y - touch0.y;\n\t\t\toldDistance = Math.sqrt(xMove * xMove + yMove * yMove);\n\n\t\t\tself.oldDistance = oldDistance;\n\t\t};\n\n\t\tself.__twoTouchMove = function(touch0, touch1) {\n\t\t\tvar xMove = void 0,\n\t\t\t\tyMove = void 0,\n\t\t\t\tnewDistance = void 0;\n\t\t\tvar scale = self.scale,\n\t\t\t\tzoom = self.zoom;\n\t\t\t// 计算二指最新距离\n\n\t\t\txMove = touch1.x - touch0.x;\n\t\t\tyMove = touch1.y - touch0.y;\n\t\t\tnewDistance = Math.sqrt(xMove * xMove + yMove * yMove\n\n\t\t\t\t//  使用0.005的缩放倍数具有良好的缩放体验\n\t\t\t);\n\t\t\tself.newScale = self.oldScale + 0.001 * zoom * (newDistance - self.oldDistance);\n\n\t\t\t//  设定缩放范围\n\t\t\tself.newScale <= 1 && (self.newScale = 1);\n\t\t\tself.newScale >= scale && (self.newScale = scale);\n\n\t\t\tself.scaleWidth = self.newScale * self.baseWidth;\n\t\t\tself.scaleHeight = self.newScale * self.baseHeight;\n\t\t\tvar imgLeft = self.touchX1 - self.scaleWidth / 2;\n\t\t\tvar imgTop = self.touchY1 - self.scaleHeight / 2;\n\n\t\t\tself.outsideBound(imgLeft, imgTop);\n\n\t\t\tself.updateCanvas();\n\t\t};\n\n\t\tself.__xtouchEnd = function() {\n\t\t\tself.oldScale = self.newScale;\n\t\t\tself.rectX = self.imgLeft;\n\t\t\tself.rectY = self.imgTop;\n\t\t};\n\t}\n\n\t/**\n\t * Created by sail on 2017/6/11.\n\t */\n\n\tvar handle = {\n\t\t//  图片手势初始监测\n\t\ttouchStart: function touchStart(e) {\n\t\t\tvar self = this;\n\t\t\tvar _e$touches = slicedToArray(e.touches, 2),\n\t\t\t\ttouch0 = _e$touches[0],\n\t\t\t\ttouch1 = _e$touches[1];\n\n\t\t\tconsole.log(JSON.stringify(touch1));\n\t\t\tif (!touch0.x) {\n\t\t\t\ttouch0.x = touch0.clientX;\n\t\t\t\ttouch0.y = touch0.clientY;\n\t\t\t\tif (touch1) {\n\t\t\t\t\ttouch1.x = touch1.clientX;\n\t\t\t\t\ttouch1.y = touch1.clientY;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsetTouchState(self, true, null, null\n\n\t\t\t\t//计算第一个触摸点的位置，并参照改点进行缩放\n\t\t\t);\n\t\t\tself.__oneTouchStart(touch0\n\n\t\t\t\t// 两指手势触发\n\t\t\t);\n\t\t\tif (e.touches.length >= 2) {\n\t\t\t\tself.__twoTouchStart(touch0, touch1);\n\t\t\t}\n\t\t},\n\n\n\t\t//  图片手势动态缩放\n\t\ttouchMove: function touchMove(e) {\n\t\t\tvar self = this;\n\n\t\t\tvar _e$touches2 = slicedToArray(e.touches, 2),\n\t\t\t\ttouch0 = _e$touches2[0],\n\t\t\t\ttouch1 = _e$touches2[1];\n\t\t\tif (!touch0.x) {\n\t\t\t\ttouch0.x = touch0.clientX;\n\t\t\t\ttouch0.y = touch0.clientY;\n\t\t\t\tif (touch1) {\n\t\t\t\t\ttouch1.x = touch1.clientX;\n\t\t\t\t\ttouch1.y = touch1.clientY;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetTouchState(self, null, true\n\n\t\t\t\t// 单指手势时触发\n\t\t\t);\n\t\t\tif (e.touches.length === 1) {\n\t\t\t\tself.__oneTouchMove(touch0);\n\t\t\t}\n\t\t\t// 两指手势触发\n\t\t\tif (e.touches.length >= 2) {\n\t\t\t\tself.__twoTouchMove(touch0, touch1);\n\t\t\t}\n\t\t},\n\t\ttouchEnd: function touchEnd(e) {\n\t\t\tvar self = this;\n\n\t\t\tsetTouchState(self, false, false, true);\n\t\t\tself.__xtouchEnd();\n\t\t}\n\t};\n\n\t/**\n\t * Created by sail on 1017/6/12.\n\t */\n\tfunction cut() {\n\t\tvar self = this;\n\t\tvar deviceRadio = self.deviceRadio;\n\n\t\tvar boundWidth = self.width; // 裁剪框默认宽度，即整个画布宽度\n\t\tvar boundHeight = self.height;\n\t\t// 裁剪框默认高度，即整个画布高度\n\t\tvar _self$cut = self.cut,\n\t\t\t_self$cut$x = _self$cut.x,\n\t\t\tx = _self$cut$x === undefined ? 0 : _self$cut$x,\n\t\t\t_self$cut$y = _self$cut.y,\n\t\t\ty = _self$cut$y === undefined ? 0 : _self$cut$y,\n\t\t\t_self$cut$width = _self$cut.width,\n\t\t\twidth = _self$cut$width === undefined ? boundWidth : _self$cut$width,\n\t\t\t_self$cut$height = _self$cut.height,\n\t\t\theight = _self$cut$height === undefined ? boundHeight : _self$cut$height;\n\n\t\t/**\n\t\t * 设置边界\n\t\t * @param imgLeft 图片左上角横坐标值\n\t\t * @param imgTop 图片左上角纵坐标值\n\t\t */\n\n\t\tself.outsideBound = function(imgLeft, imgTop) {\n\t\t\tself.imgLeft = imgLeft >= x ? x : self.scaleWidth + imgLeft - x <= width ? x + width - self.scaleWidth : imgLeft;\n\n\t\t\tself.imgTop = imgTop >= y ? y : self.scaleHeight + imgTop - y <= height ? y + height - self.scaleHeight : imgTop;\n\t\t};\n\n\t\t/**\n\t\t * 设置边界样式\n\t\t * @param color\t边界颜色\n\t\t */\n\t\tself.setBoundStyle = function() {\n\t\t\tvar _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t_ref$color = _ref.color,\n\t\t\t\tcolor = _ref$color === undefined ? '#04b00f' : _ref$color,\n\t\t\t\t_ref$mask = _ref.mask,\n\t\t\t\tmask = _ref$mask === undefined ? 'rgba(0, 0, 0, 0.3)' : _ref$mask,\n\t\t\t\t_ref$lineWidth = _ref.lineWidth,\n\t\t\t\tlineWidth = _ref$lineWidth === undefined ? 1 : _ref$lineWidth;\n\n\t\t\t// 绘制半透明层\n\t\t\tself.ctx.beginPath();\n\t\t\tself.ctx.setFillStyle(mask);\n\t\t\tself.ctx.fillRect(0, 0, x, boundHeight);\n\t\t\tself.ctx.fillRect(x, 0, width, y);\n\t\t\tself.ctx.fillRect(x, y + height, width, boundHeight - y - height);\n\t\t\tself.ctx.fillRect(x + width, 0, boundWidth - x - width, boundHeight);\n\t\t\tself.ctx.fill\n\n\t\t\t// 设置边界左上角样式\n\t\t\t// 为使边界样式处于边界外边缘，此时x、y均要减少lineWidth\n\t\t\t();\n\t\t\tself.ctx.beginPath();\n\t\t\tself.ctx.setStrokeStyle(color);\n\t\t\tself.ctx.setLineWidth(lineWidth);\n\t\t\tself.ctx.moveTo(x - lineWidth, y + 10 - lineWidth);\n\t\t\tself.ctx.lineTo(x - lineWidth, y - lineWidth);\n\t\t\tself.ctx.lineTo(x + 10 - lineWidth, y - lineWidth);\n\t\t\tself.ctx.stroke\n\n\t\t\t// 设置边界左下角样式\n\t\t\t// 为使边界样式处于边界外边缘，此时x要减少lineWidth、y要增加lineWidth\n\t\t\t();\n\t\t\tself.ctx.beginPath();\n\t\t\tself.ctx.setStrokeStyle(color);\n\t\t\tself.ctx.setLineWidth(lineWidth);\n\t\t\tself.ctx.moveTo(x - lineWidth, y + height - 10 + lineWidth);\n\t\t\tself.ctx.lineTo(x - lineWidth, y + height + lineWidth);\n\t\t\tself.ctx.lineTo(x + 10 - lineWidth, y + height + lineWidth);\n\t\t\tself.ctx.stroke\n\n\t\t\t// 设置边界右上角样式\n\t\t\t// 为使边界样式处于边界外边缘，此时x要增加lineWidth、y要减少lineWidth\n\t\t\t();\n\t\t\tself.ctx.beginPath();\n\t\t\tself.ctx.setStrokeStyle(color);\n\t\t\tself.ctx.setLineWidth(lineWidth);\n\t\t\tself.ctx.moveTo(x + width - 10 + lineWidth, y - lineWidth);\n\t\t\tself.ctx.lineTo(x + width + lineWidth, y - lineWidth);\n\t\t\tself.ctx.lineTo(x + width + lineWidth, y + 10 - lineWidth);\n\t\t\tself.ctx.stroke\n\n\t\t\t// 设置边界右下角样式\n\t\t\t// 为使边界样式处于边界外边缘，此时x、y均要增加lineWidth\n\t\t\t();\n\t\t\tself.ctx.beginPath();\n\t\t\tself.ctx.setStrokeStyle(color);\n\t\t\tself.ctx.setLineWidth(lineWidth);\n\t\t\tself.ctx.moveTo(x + width + lineWidth, y + height - 10 + lineWidth);\n\t\t\tself.ctx.lineTo(x + width + lineWidth, y + height + lineWidth);\n\t\t\tself.ctx.lineTo(x + width - 10 + lineWidth, y + height + lineWidth);\n\t\t\tself.ctx.stroke();\n\t\t};\n\t}\n\n\tvar __version__ = '1.1.4';\n\n\tvar weCropper = function() {\n\t\tfunction weCropper(params) {\n\t\t\tclassCallCheck(this, weCropper);\n\n\t\t\tvar self = this;\n\t\t\tvar _default = {};\n\n\t\t\tvalidator(self, DEFAULT);\n\n\t\t\tObject.keys(DEFAULT).forEach(function(key) {\n\t\t\t\t_default[key] = DEFAULT[key].default;\n\t\t\t});\n\t\t\tObject.assign(self, _default, params);\n\n\t\t\tself.prepare();\n\t\t\tself.attachPage();\n\t\t\tself.createCtx();\n\t\t\tself.observer();\n\t\t\tself.cutt();\n\t\t\tself.methods();\n\t\t\tself.init();\n\t\t\tself.update();\n\n\t\t\treturn self;\n\t\t}\n\n\t\tcreateClass(weCropper, [{\n\t\t\tkey: 'init',\n\t\t\tvalue: function init() {\n\t\t\t\tvar self = this;\n\t\t\t\tvar src = self.src;\n\n\n\t\t\t\tself.version = __version__;\n\n\t\t\t\ttypeof self.onReady === 'function' && self.onReady(self.ctx, self);\n\n\t\t\t\tif (src) {\n\t\t\t\t\tself.pushOrign(src);\n\t\t\t\t}\n\t\t\t\tsetTouchState(self, false, false, false);\n\n\t\t\t\tself.oldScale = 1;\n\t\t\t\tself.newScale = 1;\n\n\t\t\t\treturn self;\n\t\t\t}\n\t\t}]);\n\t\treturn weCropper;\n\t}();\n\n\tObject.assign(weCropper.prototype, handle);\n\n\n\tweCropper.prototype.prepare = prepare;\n\tweCropper.prototype.observer = observer;\n\tweCropper.prototype.methods = methods;\n\tweCropper.prototype.cutt = cut;\n\tweCropper.prototype.update = update;\n\n\treturn weCropper;\n\n})));\n"],"sourceRoot":""}